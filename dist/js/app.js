var SpotifyApp={BUTTON_SEARCH:null,API_URL:"https://api.spotify.com/v1/",SHOW_TRACKS_LABEL:"Show tracks",HIDE_TRACKS_LABEL:"Hide tracks",SLIDE_CONTENT_CL:".slide-content",init:function(){SpotifyApp.BUTTON_SEARCH=$("#search"),SpotifyApp.onSend()},getSearchResults:function(t){$.ajax({url:SpotifyApp.API_URL+"search?q="+t+"&type=track,album,artist&market=US",method:"GET",dataType:"json",success:function(a){SpotifyApp.drawSearchData(a),console.log(t),console.log(a)},error:function(){console.log("Getting data error!")}})},onSend:function(){$("button#search").on("click",function(t){SpotifyApp.getSearchResults($(".form-control").val())})},drawSearchData:function(t){for(var a="",s=0;s<t.albums.items.length;s++){var e=t.albums.items[s].id;a+='<div class="album-detail col-xs-12">',a+='<div class="match-detail col-xs-9">',a+='<div class="album-artist col-xs-12"><span>Artist: </span>'+t.albums.items[s].artists[0].name+"</div>",a+='<div class="album-name col-xs-12"><span>Title album: </span>'+t.albums.items[s].name+"</div>",a+='<button id="more" class=" btn btn-inverse" data-id="'+e+'" onclick="SpotifyApp.moreDetails(event.target)">Show tracks</button>',a+="</div>",a+='<div class="album-img col-xs-3"><img src='+t.albums.items[s].images[2].url+"></div>",a+='<div class="tracks-detail col-xs-12"></div>',a+="</div>"}$(".album-section").append(a)},moreDetails:function(t){$(t).hasClass("loaded")?SpotifyApp.slideContent(t):SpotifyApp.getTracks(t)},getTracks:function(t){var a=$(t).attr("data-id");$.ajax({url:SpotifyApp.API_URL+"albums/"+a+"/tracks",method:"GET",dataType:"json",success:function(a){SpotifyApp.showTracks(a,t),$(t).closest(".album-detail").find(SpotifyApp.SLIDE_CONTENT_CL).slideDown("slow"),$(t).addClass("loaded"),$(t).text(SpotifyApp.HIDE_TRACKS_LABEL)},error:function(){console.log("Getting data error!")}})},slideContent:function(t){$(t).closest(".album-detail").find(SpotifyApp.SLIDE_CONTENT_CL).slideToggle("slow",function(){$(t).text()==SpotifyApp.SHOW_TRACKS_LABEL?$(t).text(SpotifyApp.HIDE_TRACKS_LABEL):$(t).text(SpotifyApp.SHOW_TRACKS_LABEL)})},showTracks:function(t,a){console.log(t);var s="";s+='<div class="slide-content" style="display: none">',s+='<table class="table table-striped">',s+="<tbody>";for(var e=0;e<t.items.length;e++)s+='<tr><td><div class="album-track"><span class="track-number">'+t.items[e].track_number+"</span>"+t.items[e].name+"</div></td>",s+="<td>"+SpotifyApp.getIframe(t.items[e].uri)+"</td>",s+="</tr>";s+="</tbody></table>",s+="</div>",$(a).closest(".album-detail").find(".tracks-detail").append(s),console.log(s)},getIframe:function(t){return'<iframe src="https://embed.spotify.com/?uri='+t+'&theme=black" width="300" height="80" frameborder="0" allowtransparency="true"></iframe>'}};$(document).ready(function(){SpotifyApp.init()});
//# sourceMappingURL=app.js.map
